var Ge=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var ce=(s,e,t)=>e in s?Ge(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Z=(s,e)=>{for(var t in e||(e={}))Fe.call(e,t)&&ce(s,t,e[t]);if(Me)for(var t of Me(e))qe.call(e,t)&&ce(s,t,e[t]);return s},ee=(s,e)=>Xe(s,Ye(e));var l=(s,e,t)=>(ce(s,typeof e!="symbol"?e+"":e,t),t),de=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var p=(s,e,t)=>(de(s,e,"read from private field"),t?t.call(s):e.get(s)),c=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},u=(s,e,t,r)=>(de(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);var w=(s,e,t)=>(de(s,e,"access private method"),t);import{i as Be,r as C,o as ze,m as Je,a as Qe,n as Ze,p as Ie}from"./vendor.b8ce2bad.js";const et=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};et();var M=(s=>(s[s.BALLOOM=0]="BALLOOM",s[s.ONEAL=1]="ONEAL",s[s.DOLL=2]="DOLL",s[s.MINVO=3]="MINVO",s[s.KONDORIA=4]="KONDORIA",s[s.OVAPI=5]="OVAPI",s[s.PASS=6]="PASS",s[s.PONTAN=7]="PONTAN",s[s.Length=8]="Length",s))(M||{});const me={};function S(s){return e=>{tt(ee(Z({},s),{enemyClass:e}))}}function tt(s){if(Be(s.type))throw new TypeError("config.type is required");if(me[s.type])throw new Error(`The enemy with the name "${s.enemyClass.name}" has already exists, please try another name!`);me[s.type]=s.enemyClass}function st(s){return me[s]}const ue=0,H=1,De=Number.EPSILON;var b,j,B,V,oe;const v=class{constructor(){c(this,V);c(this,b,void 0);c(this,j,void 0);c(this,B,void 0);u(this,b,w(this,V,oe).call(this,ue,H)),u(this,j,[]),u(this,B,[])}static isSolidBlock(e,t){return t%2!=1&&e%2!=1||t<=0||t>=12||e<=0||e>=30}get emptyMap(){return w(this,V,oe).call(this,ue,H)}get value(){return p(this,b)}randomBricks(){u(this,b,w(this,V,oe).call(this,ue,H)),u(this,j,[]);for(let e=0;e<v.BrickCount;e++)do{let t=C(v.Columns-2),r=C(v.Rows-2);if(!(t<3&&r==1||t==1&&r<3)&&p(this,b)[r][t]===H){p(this,j).push({x:t,y:r}),p(this,b)[r][t]=De;break}}while(!0);return p(this,j)}randomEnemies(){u(this,B,[]);for(let e=0;e<v.EnemiesCount;e++)do{let t=C(v.Columns-2),r=C(v.Rows-2),i=C(M.Length-1);if(p(this,b)[r][t]===H){p(this,B).push({x:t,y:r,type:i}),p(this,b)[r][t]=De;break}}while(!0);return p(this,B)}};let O=v;b=new WeakMap,j=new WeakMap,B=new WeakMap,V=new WeakSet,oe=function(e,t){const r=[];for(let i=0;i<v.Rows;i++){r.push([]);for(let o=0;o<v.Columns;o++){const a=v.isSolidBlock(o,i)?e:t;r[i].push(a)}}return r},l(O,"Columns",31),l(O,"Rows",13),l(O,"BrickCount",55),l(O,"EnemiesCount",10);const it=Phaser.Scale.ScaleModes,rt=Phaser.Scale.Center,Ne=40,Le=40,d={scale:{width:640,height:520},graphics:{tile:{width:Ne,height:Le},sceneWidth:O.Columns*Ne,sceneHeight:O.Rows*Le}},ot={type:Phaser.AUTO,fps:{target:60},pixelArt:!0,scale:{width:d.scale.width,height:d.scale.height,mode:it.FIT,autoCenter:rt.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!0}}},at=(s,e)=>t=>s*e+t;function Re(s,e,t,r,i){e.forEach(o=>{var a;t.create({key:o.key,frames:t.generateFrameNumbers(s,{frames:o.frames.map(at(o.row,r))}),frameRate:i,repeat:(a=o.repeat)!=null?a:-1})})}const nt=Phaser.Events.EventEmitter;var _;(s=>{var i,o,a;let e;(n=>{n[n.Up=0]="Up",n[n.Down=1]="Down",n[n.Left=2]="Left",n[n.Right=3]="Right",n[n.A=4]="A",n[n.B=5]="B",n[n.Start=6]="Start",n[n.None=7]="None"})(e=s.Buttons||(s.Buttons={}));class t extends nt{constructor(){super(...arguments);c(this,i,ee(Z({},ze(Je(e,()=>new r(!1,!0)),(h,g)=>Qe(Number(g)))),{[7]:new r(!0,!0)}))}isPressed(...h){return h.some(g=>p(this,i)[g].isPressed())}press(h,g,N=!0){!p(this,i)[h].isEnabled()||(p(this,i)[h].setPressed(g),N&&this.emit("change",this))}pressMany(h,g,N=!0){g.forEach(J=>{!p(this,i)[J].isEnabled()||p(this,i)[J].setPressed(h)}),N&&this.emit("change",this)}}i=new WeakMap,s.Gamepad=t;class r{constructor(f,h){c(this,o,void 0);c(this,a,void 0);u(this,o,f),u(this,a,h)}isPressed(){return p(this,o)}setPressed(f){u(this,o,f)}isEnabled(){return p(this,a)}}o=new WeakMap,a=new WeakMap})(_||(_={}));function ye(s){return{x:Math.trunc(s.x/d.graphics.tile.width),y:Math.trunc(s.y/d.graphics.tile.height)}}function pt(s){return s%2===0}const lt=_.Gamepad,m=_.Buttons;var D=(s=>(s[s.Slowest=1]="Slowest",s[s.Slow=2]="Slow",s[s.Mid=4]="Mid",s[s.Fast=5]="Fast",s))(D||{});const ht={x:[m.Left,m.Right],y:[m.Up,m.Down]},ct={x:"width",y:"height"};var ae,Te,ne,Ve;class le{constructor(e,t,r,i,o,a,n,f=!1){c(this,ae);c(this,ne);l(this,"movement");l(this,"movementType");l(this,"gamepad");l(this,"speed");this.name=e,this.sprite=t,this.gamepad=new lt,this.sprite.name=this.name,this.sprite.setData("player",this),this.sprite.setOrigin(0,0),this.sprite.setPosition(r*d.graphics.tile.width,i*d.graphics.tile.height),this.sprite.setImmovable(f),this.sprite.setScale(2.5),Re(this.name,o,this.sprite.anims,a,n),this.sprite.anims.play("initial"),this.gamepad.addListener("change",w(this,ae,Te),this)}update(e,t){w(this,ne,Ve).call(this)}kill(){this.sprite.anims.play("death"),this.sprite.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>this.sprite.destroy())}startMovement(){var e;(e=this.movement)==null||e.start()}handleExtraMovement(e,t){if(this.gamepad.isPressed(...ht[t]))return;const r=this.sprite.getCenter(),i=r[t]%d.graphics.tile[ct[t]],o=ye(r);pt(o[t])||(i>=6&&i<20?this.sprite.body.velocity[t]=e:i>20&&i<34?this.sprite.body.velocity[t]=-e:this.sprite.body.velocity[t]=0)}}ae=new WeakSet,Te=function(e){this.sprite.anims.getName()!=="death"&&(e.isPressed(m.Right)?this.sprite.anims.play("right",!0):e.isPressed(m.Left)?this.sprite.anims.play("left",!0):e.isPressed(m.Up)?this.sprite.anims.play("up",!0):e.isPressed(m.Down)?this.sprite.anims.play("down",!0):this.sprite.anims.pause())},ne=new WeakSet,Ve=function(){if(this.sprite.anims.getName()==="death"){this.sprite.setVelocity(0,0);return}const e=this.speed*30;this.gamepad.isPressed(m.Up)?this.sprite.setVelocityY(-e):this.gamepad.isPressed(m.Down)?this.sprite.setVelocityY(e):this.sprite.setVelocityY(0),this.gamepad.isPressed(m.Right)?this.sprite.setVelocityX(e):this.gamepad.isPressed(m.Left)?this.sprite.setVelocityX(-e):this.sprite.setVelocityX(0),this.gamepad.isPressed(m.Right,m.Left)&&this.handleExtraMovement(e,"y"),this.gamepad.isPressed(m.Up,m.Down)&&this.handleExtraMovement(e,"x")};const dt=8,we=class extends le{constructor(e,t,r){super(we.playerName,e.get(),t,r,[{key:"initial",row:0,frames:[0]},{key:"death",row:5,frames:[0,1,2],repeat:0}],6,dt,!0)}};let E=we;l(E,"playerName","brick");class ut{constructor(e){l(this,"group");this.group=e.physics.add.group({defaultKey:E.playerName})}generateRandom(e){e.randomBricks().forEach(r=>new E(this.group,r.x,r.y))}}const te=_.Buttons;_.Gamepad;var Ke=(s=>(s[s.Low=0]="Low",s[s.Mid=1]="Mid",s[s.High=2]="High",s[s.Impossible=3]="Impossible",s))(Ke||{}),I,K,P,U;class mt{constructor(e){c(this,I,void 0);c(this,K,void 0);c(this,P,[]);c(this,U,void 0);if(u(this,I,e),u(this,K,p(this,I).gamepad),p(this,I).movementType===3)throw new Error("Impossible movement type hasn't been implemented")}start(){const e=()=>{p(this,I).movementType===0?this.makeMovement(C(0,3)):this.makeMovement(C(0,1),C(2,3))};e(),u(this,U,setInterval(e,3e3))}stop(){clearInterval(p(this,U))}makeMovement(e,t){p(this,K).pressMany(!1,p(this,P),!1),u(this,P,[]),e===0?p(this,P).push(te.Left):e===1&&p(this,P).push(te.Right),e===2||t===2?p(this,P).push(te.Up):(e===3||t===3)&&p(this,P).push(te.Down),p(this,K).pressMany(!0,p(this,P))}}I=new WeakMap,K=new WeakMap,P=new WeakMap,U=new WeakMap;const ft=5;class k extends le{constructor(e,t,r,i){super(e,t,r,i,[{key:"initial",row:1,frames:[0]},{key:"up",row:1,frames:[0,1,2]},{key:"down",row:2,frames:[0,1,2]},{key:"right",row:3,frames:[0,1,2]},{key:"left",row:4,frames:[0,1,2]},{key:"death",row:5,frames:[0,1,2,3],repeat:0}],5,ft),this.movement=new mt(this),this.sprite.setDepth(1),this.sprite.setBounce(1,1)}kill(){var e;super.kill(),(e=this.movement)==null||e.stop()}}var gt=Object.defineProperty,yt=Object.getOwnPropertyDescriptor,wt=(s,e,t,r)=>{for(var i=r>1?void 0:r?yt(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&gt(e,t,i),i};let xe=class extends k{constructor(s,e,t){super("balloom",s.get(),e,t),this.speed=D.Slowest,this.movementType=Ke.Low,this.sprite.setDepth(1)}};xe=wt([S({type:M.BALLOOM})],xe);var vt=Object.defineProperty,bt=Object.getOwnPropertyDescriptor,Pt=(s,e,t,r)=>{for(var i=r>1?void 0:r?bt(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&vt(e,t,i),i};let _e=class extends k{constructor(s,e,t){super("doll",s.get(),e,t),this.speed=D.Slow,this.sprite.setDepth(1)}};_e=Pt([S({type:M.DOLL})],_e);var Ot=Object.defineProperty,Mt=Object.getOwnPropertyDescriptor,Dt=(s,e,t,r)=>{for(var i=r>1?void 0:r?Mt(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&Ot(e,t,i),i};let Ce=class extends k{constructor(s,e,t){super("kondoria",s.get(),e,t),this.speed=D.Slowest,this.sprite.setDepth(1)}};Ce=Dt([S({type:M.KONDORIA})],Ce);var Nt=Object.defineProperty,Lt=Object.getOwnPropertyDescriptor,xt=(s,e,t,r)=>{for(var i=r>1?void 0:r?Lt(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&Nt(e,t,i),i};let Ee=class extends k{constructor(s,e,t){super("minvo",s.get(),e,t),this.speed=D.Mid,this.sprite.setDepth(1)}};Ee=xt([S({type:M.MINVO})],Ee);var _t=Object.defineProperty,Ct=Object.getOwnPropertyDescriptor,Et=(s,e,t,r)=>{for(var i=r>1?void 0:r?Ct(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&_t(e,t,i),i};let Ae=class extends k{constructor(s,e,t){super("oneal",s.get(),e,t),this.speed=D.Slow,this.sprite.setDepth(1)}};Ae=Et([S({type:M.ONEAL})],Ae);var At=Object.defineProperty,St=Object.getOwnPropertyDescriptor,kt=(s,e,t,r)=>{for(var i=r>1?void 0:r?St(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&At(e,t,i),i};let Se=class extends k{constructor(s,e,t){super("ovapi",s.get(),e,t),this.speed=D.Slowest,this.sprite.setDepth(1)}};Se=kt([S({type:M.OVAPI})],Se);var $t=Object.defineProperty,jt=Object.getOwnPropertyDescriptor,Bt=(s,e,t,r)=>{for(var i=r>1?void 0:r?jt(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&$t(e,t,i),i};let ke=class extends k{constructor(s,e,t){super("pass",s.get(),e,t),this.speed=D.Mid,this.sprite.setDepth(1)}};ke=Bt([S({type:M.PASS})],ke);var It=Object.defineProperty,Rt=Object.getOwnPropertyDescriptor,Tt=(s,e,t,r)=>{for(var i=r>1?void 0:r?Rt(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&It(e,t,i),i};let $e=class extends k{constructor(s,e,t){super("pontan",s.get(),e,t),this.speed=D.Mid,this.sprite.setDepth(1)}};$e=Tt([S({type:M.PONTAN})],$e);class Vt{constructor(e){l(this,"group");this.group=e.physics.add.group({defaultKey:E.playerName})}generateRandom(e){e.randomEnemies().forEach(r=>{const i=st(r.type);new i(this.group,r.x,r.y).startMovement()})}update(e,t){this.group.children.each(r=>{r.getData("player").update(e,t)})}}const Kt={right:"horizontal",left:"horizontal",up:"vertical",down:"vertical"},Ht=8;function se(s,e,t){return s==="x"&&(e==="up"||e==="down")||s==="y"&&(e==="right"||e==="left")?0:t*(e==="up"||e==="left"?-1:1)}function Ut(s,e){return s==="up"||s==="down"?{width:d.graphics.tile.width,height:e*d.graphics.tile.height}:{width:e*d.graphics.tile.width,height:d.graphics.tile.height}}var W,fe,G,ge;class Wt{constructor(e,t,r){c(this,W);c(this,G);l(this,"group");this.group=e.physics.add.group({defaultKey:"fire"});const i=[{key:"center",row:0,frames:[0,1,2,3],repeat:0},{key:"up",row:1,frames:[0,1,2,3],repeat:0},{key:"down",row:2,frames:[0,1,2,3],repeat:0},{key:"right",row:3,frames:[0,1,2,3],repeat:0},{key:"left",row:4,frames:[0,1,2,3],repeat:0},{key:"horizontal",row:5,frames:[0,1,2,3],repeat:0},{key:"vertical",row:6,frames:[0,1,2,3],repeat:0}],o=["up","down","left","right"],a=w(this,W,fe).call(this,i);a.anims.play("center"),a.setPosition(t.x*d.graphics.tile.width,t.y*d.graphics.tile.height);for(const n of o){const f={x:t.x+se("x",n,n==="right"?1:r),y:t.y+se("y",n,n==="down"?1:r)},h=e.tileMap.tileMap.tileToWorldXY(f.x,f.y),g=Ut(n,r);e.tileMap.tileMap.getTilesWithinWorldXY(h.x+1,h.y+1,g.width-2,g.height-2,{isColliding:!0});const N=e.physics.overlapRect(h.x+1,h.y+1,g.width-2,g.height-2,!0,!0);(n==="right"||n==="down")&&N.reverse();const J=N.filter(L=>{var y;return((y=L.gameObject)==null?void 0:y.name)===E.playerName}),We=N.filter(L=>{var y;return((y=L.gameObject)==null?void 0:y.name)===A.playerName}),Pe=e.physics.closest(a,J),Oe=e.physics.closest(a,We);for(let L=1;L<=r;L++){const y={x:t.x+se("x",n,L),y:t.y+se("y",n,L)};if(O.isSolidBlock(y.x,y.y))break;const Q=e.tileMap.tileMap.tileToWorldXY(y.x,y.y);if(Pe&&Q.equals(Pe)||Oe&&Q.equals(Oe)){w(this,G,ge).call(this,N,y,e.tileMap.tileMap,e);break}const he=w(this,W,fe).call(this,i);he.setPosition(Q.x,Q.y),L===r?he.anims.play(n):he.anims.play(Kt[n]),w(this,G,ge).call(this,N,y,e.tileMap.tileMap,e)}}}}W=new WeakSet,fe=function(e){const t=this.group.get();return t.setOrigin(0,0),t.setImmovable(!0),t.setScale(2.5),t.once(Phaser.Animations.Events.ANIMATION_COMPLETE,()=>t.destroy()),Re("fire",e,t.anims,4,Ht),t},G=new WeakSet,ge=function(e,t,r,i){e.filter(o=>r.worldToTileXY(o.center.x,o.center.y).equals(t)).forEach(o=>{var a;o.gameObject.name===A.playerName?(a=o.gameObject.getData("player"))==null||a.detonate(i):o.gameObject.getData("player").kill()})};const Gt=3;var X;const ve=class extends le{constructor(t,r,i,o,a){super(ve.playerName,t.get(),o,a,[{key:"initial",row:0,frames:[0,1,2]},{key:"death",row:0,frames:[3],repeat:0}],4,Gt,!0);c(this,X,void 0);u(this,X,i),i.detonator||setTimeout(()=>{this.detonate(r)},3200)}detonate(t){if(!this.sprite.anims||this.sprite.anims.getName()==="death")return;this.sprite.anims.play("death"),this.kill();const r=ye(this.sprite.getCenter());new Wt(t,r,p(this,X).fireLength)}kill(){var t;super.kill(),(t=this.sprite.anims)==null||t.complete()}};let A=ve;X=new WeakMap,l(A,"playerName","bomb");var Y;class Xt{constructor(e){l(this,"group");c(this,Y,void 0);u(this,Y,e),this.group=e.physics.add.group({defaultKey:A.playerName})}addBomb(e,t,r){new A(this.group,p(this,Y),e,t,r)}}Y=new WeakMap;const $=_.Buttons,He={Up:$.Up,Down:$.Down,Left:$.Left,Right:$.Right,x:$.A,c:$.B,Enter:$.Start};function je(s,e){return t=>{const r=He[e];Be(r)||s.gamepad.press(r,t.isDown)}}function Yt(s,e){const t=s.addKeys(Object.keys(He).join(","),!0,!0);return Object.entries(t).forEach(([r,i])=>{i.on("down",je(e,r)),i.on("up",je(e,r))}),()=>Object.entries(t).forEach(([r,i])=>{i.destroy()})}const x=_.Buttons;function Ft(s){const e=s.gamepad,t=Ze.create({mode:"static",position:{left:"100px",bottom:"100px"}}),r=()=>{e.pressMany(!1,[x.Right,x.Up,x.Left,x.Down])},i=(o,a)=>{const n=[],f=[];let h;!a.distance||(h=a.angle.degree<=60||a.angle.degree>=300?n:f,h.push(x.Right),h=a.angle.degree>=30&&a.angle.degree<=150?n:f,h.push(x.Up),h=a.angle.degree>=120&&a.angle.degree<=240?n:f,h.push(x.Left),h=a.angle.degree>=210&&a.angle.degree<=330?n:f,h.push(x.Down),e.pressMany(!0,n),e.pressMany(!1,f))};return t.on("end",r),t.on("move",i),()=>{t.off("end",r),t.off("move",i)}}function qt(s){const e=s.gamepad,t=document.querySelector("body"),r=document.createElement("div"),i=document.createElement("img");i.src="assets/joystick/bomb-btn.png",r.appendChild(i),Object.assign(r.style,{bottom:"50px",display:"flex",opacity:"0.5",position:"absolute",right:"50px",transition:"opacity 250ms ease 0s"}),Object.assign(i.style,{width:"100px",pointerEvents:"none",userSelect:"none"}),t.appendChild(r);const o=a=>{a.stopPropagation();const n=a.type==="pointerdown";r.style.opacity=n?"0.8":"0.5",e.press(x.A,n)};return r.addEventListener("pointerdown",o),r.addEventListener("pointerup",o),()=>{r.removeEventListener("pointerdown",o),r.removeEventListener("pointerup",o)}}function zt(s){const e=Ft(s),t=qt(s);return()=>{e(),t()}}const Jt=_.Buttons,Qt=6;var F,q,pe,Ue;const be=class extends le{constructor(t,r,i,o){super(be.playerName,t,i,o,[{key:"initial",row:0,frames:[0]},{key:"up",row:1,frames:[2,1,0,1]},{key:"down",row:2,frames:[2,1,0,1]},{key:"right",row:3,frames:[2,1,0,1]},{key:"left",row:4,frames:[2,1,0,1]},{key:"death",row:5,frames:[0,1,2,3,4],repeat:0}],6,Qt);c(this,pe);l(this,"detonator");l(this,"fireLength");l(this,"bombs");c(this,F,void 0);c(this,q,void 0);this.bombs=new Xt(r),this.speed=D.Mid,this.detonator=!1,this.fireLength=3,this.sprite.setDepth(1),u(this,F,Yt(r.input.keyboard,this)),u(this,q,zt(this))}update(t,r,i,o){super.update(t,r),w(this,pe,Ue).call(this,i,o)}kill(){super.kill(),p(this,F).call(this),p(this,q).call(this)}};let T=be;F=new WeakMap,q=new WeakMap,pe=new WeakSet,Ue=function(t,r){if(this.gamepad.isPressed(Jt.A)&&!t.overlap(this.sprite,this.bombs.group)&&!t.overlap(this.sprite,r.bricks.group)){const i=this.sprite.getCenter(),{x:o,y:a}=ye(i);this.bombs.addBomb(this,o,a)}},l(T,"playerName","bomberman");var z;class Zt{constructor(e){l(this,"group");c(this,z,void 0);u(this,z,e),this.group=e.physics.add.group({defaultKey:T.playerName})}addPlayer(e,t,r){const i=new T(this.group.get(),e,t,r),o=this.group.getChildren().map(a=>a.getData("player").bombs.group);e.physics.add.collider(i.sprite,e.tileMap.itemTileSetLayer),e.physics.add.collider(i.bombs.group,e.tileMap.itemTileSetLayer),e.physics.add.collider(i.bombs.group,o),e.physics.add.collider(i.sprite,o),e.physics.add.collider(e.tileMap.enemies.group,[i.bombs.group,e.tileMap.bricks.group]),e.physics.add.collider(e.tileMap.enemies.group,e.tileMap.itemTileSetLayer),e.cameras.main.startFollow(i.sprite,!0)}update(e,t,r,i){this.group.children.each(o=>{o.getData("player").update(e,t,r,i)}),this.group.children.size===0&&this.addPlayer(p(this,z),1,1)}}z=new WeakMap;var R;class es{constructor(e){l(this,"itemTileSetLayer");c(this,R,void 0);l(this,"tileMap");l(this,"bricks");l(this,"enemies");l(this,"players");u(this,R,new O),this.tileMap=e.make.tilemap({data:p(this,R).emptyMap,width:d.graphics.sceneWidth,height:d.graphics.sceneHeight,tileWidth:d.graphics.tile.width,tileHeight:d.graphics.tile.height});const t=this.tileMap.addTilesetImage("items",void 0,16,16);this.itemTileSetLayer=this.tileMap.createLayer(0,t),this.bricks=new ut(e),this.players=new Zt(e),this.enemies=new Vt(e),this.tileMap.setCollision(0)}reset(e){this.players.addPlayer(e,1,1),this.bricks.generateRandom(p(this,R)),this.enemies.generateRandom(p(this,R))}update(e,t,r){this.players.update(e,t,r.physics,this),this.enemies.update(e,t)}}R=new WeakMap;const ie=16,re=16;class ts extends Ie.exports.Scene{constructor(){super("GameScene");l(this,"tileMap")}preload(){this.load.image("items","assets/map/items.png"),this.load.spritesheet(E.playerName,"assets/map/brick.png",{frameWidth:ie,frameHeight:re}),this.load.spritesheet(A.playerName,"assets/map/bomb.png",{frameWidth:ie,frameHeight:re}),this.load.spritesheet("fire","assets/map/fire.png",{frameWidth:ie,frameHeight:re}),[T.playerName,"balloom","doll","kondoria","minvo","oneal","ovapi","pass","pontan"].forEach(t=>this.load.spritesheet(t,`assets/players/${t}.png`,{frameWidth:ie,frameHeight:re}))}create(){this.tileMap=new es(this),this.tileMap.reset(this),this.cameras.main.setBounds(0,0,d.graphics.sceneWidth,d.graphics.sceneHeight),this.physics.world.setBounds(0,0,d.graphics.sceneWidth,d.graphics.sceneHeight)}update(t,r){super.update(t,r),this.tileMap.update(t,r,this)}}new Ie.exports.Game(ee(Z({},ot),{scene:[ts]}));
